import{r as Y,c as w,a as h,o as u,b as _,d as r,e as f,f as O,S as G,t as x,g as z,h as K,i as W,j as F,k as X,w as k,p as S,l as $,m as L,n as Q,q,s as T,v as A,F as I,u as J,x as Z,y as ee}from"./vendor.d2cd85e9.js";const te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}};te();const p=Y({user:{},account:{},gifts:[],giphys:[]});var b=(t,e)=>{for(const[o,s]of e)t[o]=s;return t};const oe={name:"App",setup(){return{appState:w(()=>p)}}},se={class:"container-fluid"},re={class:"row"},ne={class:"col-md-3 bg-success tall"},ae={class:"col-md-9"};function ie(t,e,o,s,n,a){const i=h("Sidebar"),c=h("router-view");return u(),_("main",se,[r("div",re,[r("div",ne,[f(i)]),r("div",ae,[f(c)])])])}var ce=b(oe,[["render",ie]]);const N=window.location.origin.includes("localhost"),D=N?"https://bcw-sandbox.herokuapp.com/":"",le="codeworksclassroom.auth0.com",ue="pOXw2OGv1LsYi7LEBmDF04RLkXQvldml",de="https://codeworksclassroom.com";function y(t,e){if(N)console[t](`[${t}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const l={log(){y("log",arguments)},error(){y("error",arguments)},warn(){y("warn",arguments)},assert(){y("assert",arguments)},trace(){y("trace",arguments)}},m=O.create({baseURL:D,timeout:8e3}),_e=O.create({baseURL:"http://api.giphy.com/v1/gifs",timeout:8e3});class pe{async get(){const e=await m.get("api/gifts");l.log(e.data),p.gifts=e.data}async openGift(e){const o=await m.put("api/gifts/"+e,{opened:!0});l.log(o.data);const s=p.gifts.findIndex(n=>n._id==e);p.gifts[s]=o.data}async create(e){const o=await m.post("api/gifts",e);l.log(o.data),p.gifts.unshift(o.data)}}const E=new pe;class g{static async confirm(e="Are you sure?",o="You won't be able to revert this!",s,n="Yes, delete it!"){try{return!!(await G.fire({title:e,text:o,imageUrl:s,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n})).isConfirmed}catch{return!1}}static toast(e="Warning!",o="warning",s="top-end",n=3e3,a=!0){G.fire({title:e,icon:o,position:s,timer:n,timerProgressBar:a,toast:!0,showConfirmButton:!1})}}const ge={props:{gift:{type:Object,required:!0}},setup(t){return{async openGift(){try{await E.openGift(t.gift._id),g.toast("Enjoy your gift!","success")}catch(e){l.error(e),g.toast(e.message,"error")}}}}},me={class:"col-lg-4 col-sm-6 mb-3"},he={key:0,class:"bg-light shadow d-flex flex-column p-3"},fe=["src"],be={class:"text-center text mt-3"},ve=["src"],ye={class:"text-center text mt-3"};function we(t,e,o,s,n,a){return u(),_("div",me,[o.gift.opened?(u(),_("div",he,[r("img",{src:o.gift.url,alt:""},null,8,fe),r("div",be,x(o.gift.tag),1)])):(u(),_("div",{key:1,onClick:e[0]||(e[0]=i=>s.openGift()),class:"bg-light selectable shadow d-flex flex-column p-3",title:"Click to open your gift!"},[r("img",{src:"https://images.unsplash.com/photo-1553532434-5ab5b6b84993?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074",alt:""},null,8,ve),r("div",ye,x(o.gift.tag),1)]))])}var xe=b(ge,[["render",we],["__scopeId","data-v-41c1000e"]]),ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xe});const Se={props:{giphy:{type:Object,required:!0},editable:{type:Object,required:!0}},setup(t){return{setEditable(){t.editable.tag=t.giphy.tag,t.editable.url=t.giphy.url}}}},$e=["src"],Te={class:"p-2"};function Ae(t,e,o,s,n,a){return u(),_("div",{class:"col-12 bg-light ps-0 mb-3 d-flex text-dark shadow rounded selectable",onClick:e[0]||(e[0]=i=>s.setEditable())},[r("img",{class:"rounded-start",src:o.giphy.url,alt:""},null,8,$e),r("p",Te,x(o.giphy.tag),1)])}var Ee=b(Se,[["render",Ae],["__scopeId","data-v-06952d5c"]]),Ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ee});const Oe="modulepreload",P={},Ge="/",Le=function(e,o){return!o||o.length===0?e():Promise.all(o.map(s=>{if(s=`${Ge}${s}`,s in P)return;P[s]=!0;const n=s.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const i=document.createElement("link");if(i.rel=n?"stylesheet":Oe,n||(i.as="script",i.crossOrigin=""),i.href=s,document.head.appendChild(i),n)return new Promise((c,V)=>{i.addEventListener("load",c),i.addEventListener("error",V)})})).then(()=>e())};function qe(t){switch(t){case"./pages/HomePage.vue":return Le(()=>import("./HomePage.15f7b994.js"),["assets/HomePage.15f7b994.js","assets/vendor.d2cd85e9.js"]);default:return new Promise(function(e,o){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function C(t){return()=>qe(`./pages/${t}.vue`)}const Ie=[{path:"/",name:"Home",component:C("HomePage")},{path:"/about",name:"About",component:C("AboutPage")},{path:"/account",name:"Account",component:C("AccountPage"),beforeEnter:W}],R=z({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:K(),routes:Ie});class Ne{async getAccount(){try{const e=await m.get("/account");p.account=e.data}catch(e){l.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const De=new Ne,Pe={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Re{constructor(e=!1,o=D){}on(e,o){var s;return(s=this.socket)==null||s.on(e,o.bind(this)),this}onConnected(e){l.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){l.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var o;(o=this.socket)==null||o.emit(Pe.authenticate,e)}onError(e){l.error("[SOCKET_ERROR]",e)}enqueue(e,o){l.log("[ENQUEING_ACTION]",{action:e,payload:o}),this.queue.push({action:e,payload:o})}playback(){l.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(o=>{this.emit(o.action,o.payload)})}emit(e,o=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,o);if(!this.connected)return this.enqueue(e,o);this.socket.emit(e,o)}}class He extends Re{constructor(){super();this.on("error",this.onError)}onError(e){g.toast(e.message,"error")}}const H=new He,d=F({domain:le,clientId:ue,audience:de,useRefreshTokens:!0,onRedirectCallback:t=>{R.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});d.on(d.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=d.bearer,m.interceptors.request.use(Ue),p.user=d.user,await De.getAccount(),H.authenticate(d.bearer)});async function Ue(t){if(!d.isAuthenticated)return t;const e=d.identity.exp*1e3,o=e<Date.now(),s=e<Date.now()+1e3*60*60*12;return o?await d.loginWithPopup():s&&(await d.getTokenSilently(),m.defaults.headers.authorization=d.bearer,H.authenticate(d.bearer)),t}const je={setup(){return{user:w(()=>p.user),account:w(()=>p.account),async login(){d.loginWithPopup()},async logout(){d.logout({returnTo:window.location.origin})}}}},U=t=>(S("data-v-f7b5cf20"),t=t(),$(),t),Be={class:"navbar-text"},Me={key:1,class:"dropdown my-2 my-lg-0"},Ve={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},Ye={key:0},ze=["src"],Ke={class:"mx-3 text-success lighten-30"},We={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},Fe=U(()=>r("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),Xe=U(()=>r("i",{class:"mdi mdi-logout"},null,-1)),Qe=L(" logout "),Je=[Xe,Qe];function Ze(t,e,o,s,n,a){const i=h("router-link");return u(),_("span",Be,[s.user.isAuthenticated?(u(),_("div",Me,[r("div",Ve,[s.account.picture?(u(),_("div",Ye,[r("img",{src:s.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,ze),r("span",Ke,x(s.account.name),1)])):X("",!0)]),r("div",We,[f(i,{to:{name:"Account"}},{default:k(()=>[Fe]),_:1}),r("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...c)=>s.logout&&s.logout(...c))},Je)])])):(u(),_("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...c)=>s.login&&s.login(...c))}," Login "))])}var et=b(je,[["render",Ze],["__scopeId","data-v-f7b5cf20"]]),tt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:et}),ot="/assets/cw-logo.71baeadb.png";const st={setup(){return{}}},j=t=>(S("data-v-0655e9eb"),t=t(),$(),t),rt={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},nt=j(()=>r("div",{class:"d-flex flex-column align-items-center"},[r("img",{alt:"logo",src:ot,height:"45"})],-1)),at=j(()=>r("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[r("span",{class:"navbar-toggler-icon"})],-1)),it={class:"collapse navbar-collapse",id:"navbarText"},ct={class:"navbar-nav me-auto"},lt=L(" About ");function ut(t,e,o,s,n,a){const i=h("router-link"),c=h("Login");return u(),_("nav",rt,[f(i,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:k(()=>[nt]),_:1}),at,r("div",it,[r("ul",ct,[r("li",null,[f(i,{to:{name:"About"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:k(()=>[lt]),_:1})])]),f(c)])])}var dt=b(st,[["render",ut],["__scopeId","data-v-0655e9eb"]]),_t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:dt});class pt{constructor(e){this.url=e.images.original.url,this.tag=e.title,this.id=e.id}}let B={api_key:"2oUH81wd4o03OHd1uxmkNxTX7x8L2bJ7",rating:"g",q:"",limit:10};class gt{async search(e){p.giphys=[],B.q=e;const o=await _e.get("search",{params:B});return l.log(o.data),p.giphys=o.data.data.map(s=>new pt(s)),o.data.pagination.total_count}}const mt=new gt;const ht={setup(){let t=Q({tag:"",url:""});return{editable:t,giphys:w(()=>p.giphys),async getGifts(){try{await E.get()}catch(e){l.error(e),g.toast(e.message,"error")}},async search(){try{const e=await mt.search(t.value.search);g.toast(e+" results found","info")}catch(e){l.error(e),g.toast(e.message,"error")}},async createGift(){if(await g.confirm('<i class="mdi mdi-arrow-up-thick"></i> You want to post this gift? <i class="mdi mdi-arrow-up-thick"></i>',"It had better be sick, okay?",t.value.url,"DO IT"))try{await E.create(t.value),t.value.tag="",t.value.url="",g.toast("Succesfully created a new gift!","success")}catch(e){l.error(e),g.toast(e.message,"error")}}}}},v=t=>(S("data-v-0391589b"),t=t(),$(),t),ft={class:"row"},bt={class:"col-12 d-flex flex-column"},vt=v(()=>r("h1",{class:"p-3"},"Gifted",-1)),yt={class:"my-3 px-2"},wt=v(()=>r("label",{for:"tag",class:"form-label ms-1"},"Tag",-1)),xt={class:"mb-5 px-2"},kt=v(()=>r("label",{for:"url",class:"form-label ms-1"},"URL",-1)),St=v(()=>r("button",{class:"btn btn-primary ms-3 mb-3 justify-self-end"}," Submit ",-1)),$t=v(()=>r("label",{for:"url",class:"form-label top-line ms-2 pt-3 border-top border-light"},"Search Gifs",-1)),Tt={class:"input-group mb-3 px-2"},At=v(()=>r("button",{class:"btn btn-primary",id:"button-addon2"},[r("i",{class:"mdi mdi-magnify"})],-1)),Et={class:"row mx-1"};function Ct(t,e,o,s,n,a){const i=h("Giphy");return u(),_(I,null,[r("div",ft,[r("div",bt,[vt,r("form",{onSubmit:e[2]||(e[2]=q(c=>s.createGift(),["prevent"]))},[r("div",yt,[wt,T(r("input",{required:"",type:"text",class:"form-control",id:"tag","onUpdate:modelValue":e[0]||(e[0]=c=>s.editable.tag=c)},null,512),[[A,s.editable.tag]])]),r("div",xt,[kt,T(r("input",{required:"",type:"text",class:"form-control",id:"url","onUpdate:modelValue":e[1]||(e[1]=c=>s.editable.url=c)},null,512),[[A,s.editable.url]])]),St],32),$t,r("form",{onSubmit:e[4]||(e[4]=q(c=>s.search(),["prevent"]))},[r("div",Tt,[T(r("input",{required:"",for:"search",type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=c=>s.editable.search=c)},null,512),[[A,s.editable.search]]),At])],32)])]),r("div",Et,[(u(!0),_(I,null,J(s.giphys,c=>(u(),Z(i,{key:c.id,giphy:c,editable:s.editable},null,8,["giphy","editable"]))),128))])],64)}var Ot=b(ht,[["render",Ct],["__scopeId","data-v-0391589b"]]),Gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ot});function Lt(t){Object.entries({"./components/Gift.vue":ke,"./components/Giphy.vue":Ce,"./components/Login.vue":tt,"./components/Navbar.vue":_t,"./components/Sidebar.vue":Gt}).forEach(([o,s])=>{const n=s.name||o.substr(o.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(n,s.default)})}const M=ee(ce);Lt(M);M.use(R).mount("#app");export{p as A,g as P,b as _,l,E as s};
